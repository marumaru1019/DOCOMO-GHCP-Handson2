---
title: ⑥運用手順書の作成
categories: [運用, GitHub Copilot]
weight: 6
---

運用フェーズでは、**本番環境**へのリリース（デプロイ）作業など、定期的に実施する**ルーティン**があります。
ここでは、トラブルシュートではなく、**週次で行う本番環境反映の手順**を想定し、**GitHub Copilot** を活用して**運用手順書**を作成するシナリオを紹介します。

## シナリオ：週次の本番反映フロー

- 毎週水曜に**ステージング→本番**への反映を実行  
- コマンドラインで**Azure CLI**を用いて本番リソースを更新  
- **テスト**や**事前準備**の手順も記載しておきたい  

以下の手順書を作成し、**チーム全員**に共有してミスを防止するイメージです。

---

## 1. GitHub Copilot で運用手順書を作成する例

### 作業フローの要点を Copilot に伝える

1. **ステージング環境でテスト完了**
2. **GitHubリポジトリ**にマージされたら**バージョンタグを付与**
3. **Azure App Service**へ本番デプロイ (Java 17アプリケーション)
4. **SmokeTest**（簡易確認）実施
5. **ログ確認**で異常がないかチェック

### :pen: プロンプト例

```text
週次で行う本番反映手順書をMarkdownで作成してください。
以下のポイントを含めて:
1) GitHub上でバージョンタグを付ける
2) Azure CLIでデプロイ
3) SmokeTestの実施
4) ログ確認
対象アプリ：Java 17
```

### :robot: 出力例

```markdown
# 週次本番反映手順書

## 前提
- ステージング環境でテスト済み
- main ブランチに修正がマージ済み

## 1. バージョンタグ付与
1. ローカルで最新コードを取得
   git checkout main
   git pull origin main
   
2. 新しいバージョンタグを作成 (例: v1.2.3)
   git tag v1.2.3
   git push origin v1.2.3

## 2. Azure へのデプロイ
1. コードをビルド (Maven)
   mvn clean package

2. Azure にログイン
   az login

3. Web App へデプロイ (Java17)
   az webapp up \
     --name MyProductionApp \
     --runtime "java|17" \
     --resource-group MyResourceGroup

   - 既存アプリがある場合は上書き更新

## 3. SmokeTest の実施
1. 本番URLにアクセスし、基本機能を確認
2. ログイン/メッセージ送信など主要操作を1回ずつ実行
3. エラーが出ないか簡易チェック

## 4. ログ確認
- Azure Portal → App Service → "Log stream"
- 10分程度動作させ、不審なログがないか確認
- 必要に応じて警告・エラーをチームに報告

## 補足
- 大きな機能追加時は、事前にDBマイグレーション手順が必要な場合あり (別途手順書参照)
- リリース後24時間はログを集中監視し、問題がなければ通常運用に戻す
```

Copilot は**運用手順**を**Markdown形式**でまとめ、**CLIコマンド**や**流れ**を一覧化します。  
チームはこれを**リポジトリ**や**社内Wiki**に保存し、**Pull Request**でレビューしながら最適化できます。

---

## まとめ

- **運用手順書の作成**は、定型的な作業が多く、手書きだと時間がかかる→ **Copilot** で**概要～具体的コマンド**まで自動生成  
- **週次の本番反映**(例: AzureのWeb Appデプロイ)を**CLIコマンド付き**で書かせ→ **作業漏れ**を減らす  
- **Github**に手順書をコミット → **Pull Request**でメンテナンスしながら運用ノウハウを蓄積  

こうして**Copilot**を活用することで、**システム運用**の**反映手順**が**標準化**され、チーム全員が**短時間**で同じ作業を再現できるようになります。