---
title: ④複雑なタスクを単純なタスクに分割する
categories: [GitHub Copilot, Prompt Engineering]
weight: 4
---

大きな機能を **1度にすべて**実装しようとすると、Copilot が混乱して意図しないコードを返す可能性があります。そこで、**複雑なタスクを小さなステップに分割し**、**各ステップを順に Copilot に任せる**ことで、完成度の高いコードを得る手法を紹介します。以下では、「**ショッピングリスト管理**」を小タスクに分解する例を示します。

---

## 複雑なタスクを分割する – ショッピングリスト例

**最終目標**: 「ユーザーがアイテムを追加・削除・一覧表示できる、小さなショッピングリスト管理プログラムを作る」

### ステップ分割
1. **Step1**: アイテムを保持するクラスの作成 (ItemやShoppingListなど)
2. **Step2**: アイテムを追加するメソッド
3. **Step3**: アイテムを削除するメソッド
4. **Step4**: リストを表示するメソッド  
   - 最後に main メソッドなどでこれらを組み合わせる

---

### :pen: 例 – 段階的なプロンプト

#### ステップ1 – アイテムを保持するクラス

```text
[STEP 1]
Java 17で "ShoppingItem" クラスを作ってください:
- フィールド: name(String), quantity(int)
- コンストラクタで name, quantity をセット
- getter/setter も追加
```

Copilot は `ShoppingItem.java` を定義し、名称や数量を管理するクラスを自動生成してくれるでしょう。

#### ステップ2 – アイテムを追加するメソッド

```text
[STEP 2]
ShoppingItem のリストを保持する "ShoppingList" クラスを作ってください。
- フィールド: items (List<ShoppingItem>)
- メソッド: addItem(String name, int qty)
- 言語: Java 17
```

Copilot が **`ShoppingList`** クラス内に、`addItem`メソッドを実装（Listに新しいItemを追加）してくれるはずです。

#### ステップ3 – アイテムを削除するメソッド

```text
[STEP 3]
"ShoppingList" に removeItem(String name) を追加してください。
- name が一致するアイテムがあれば削除
```

Copilot は**リストの要素を検索・削除**するロジックを提案。

#### ステップ4 – リストの表示

```text
[STEP 4]
"ShoppingList"に showList() を追加してください。
- すべてのアイテムを name と quantity で出力
- 言語: Java 17
```

Copilot が**一覧表示**用メソッドを加筆してくれます。

---

## :memo: 練習

1. **最終結合**  
   - mainメソッドを追加し、「addItem」「removeItem」「showList」を呼び出す簡単なループを実装させる  
2. **ステップをさらに分割**  
   - 例: 「ShoppingListをファイルへ保存/読み込みする」ステップを追加で依頼  
3. **ゼロショットとの比較**  
   - 同じ「ショッピングリスト」を一度に頼むとどうなるか → 生成コードと段階的依頼コードの違いを観察

---

## まとめ

- **1回で全部書かせようとする**より、**小さなステップ**で指示を出すほうが、Copilot が**確実にロジックを理解**して実装してくれる  
- **ShoppingList** のような簡単な例でも、**分割**して実装すればミスや混乱が減り、段階的に完成度が高いコードを得やすい  
- 大規模なプロジェクトでも、この考え方を応用して**段階的に頼む**ことで、Copilotのサポートを効果的に引き出せます