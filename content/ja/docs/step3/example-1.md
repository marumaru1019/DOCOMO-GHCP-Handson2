---
title: ①コード規約に沿ったコードの記載
categories: [GitHub Copilot, Engineer Usecases]
weight: 1
---

現場では、自社やチームのコード規約（スタイルガイド、Lintルールなど）を守る必要があります。Copilot が最初から規約を意識したコードを生成してくれれば、後から修正する手間が大きく減ります。そのための方法として、マークダウン形式で書いた規約ファイルを #file コマンドで参照させたり、カスタムインストラクションを設定する手段があります。

---

## 規約ファイルを参照する

たとえば、以下のようなファイルを `code-style.md` として用意し、**#file** で読み込ませます。  

```markdown
# Silly Code Style

1. **クラスの最初**に必ずコメント：
/**
 * Generated by Copilot - Complies with internal code style
 */
2. メソッド名は**美味しそうな単語 + 動詞**で構成する (例: `bananaMix`, `pizzaBake`)
3. 変数名は**LY**プレフィックスをつける (例: `LYCount`, `LYValue`)
```

---

### :pen: プロンプト例

```text
#file code-style.md に沿ってバブルソートを書いてください
```

### :robot: 出力例 (イメージ)

```java
/**
 * Generated by Copilot - Complies with internal code style
 */
public class BubbleSort {

    public static void appleSort(int[] LYArray) {
        int LYLength = LYArray.length;
        for (int i = 0; i < LYLength - 1; i++) {
            for (int j = 0; j < LYLength - i - 1; j++) {
                if (LYArray[j] > LYArray[j + 1]) {
                    // swap LYArray[j] and LYArray[j+1]
                    int LYTemp = LYArray[j];
                    LYArray[j] = LYArray[j + 1];
                    LYArray[j + 1] = LYTemp;
                }
            }
        }
    }

    public static void main(String[] args) {
        int[] LYArray = {64, 34, 25, 12, 22, 11, 90};
        appleSort(LYArray);
        System.out.println("Sorted array");
        for (int LYValue : LYArray) {
            System.out.print(LYValue + " ");
        }
    }
}
```
Copilot は**コード規約ファイル**を参照して、**規約に合致した形式**のクラス・メソッド・コメントを提案してくれる可能性が高いです。

--- 

## カスタムインストラクション（プレビュー）

- 新機能であるカスタムインストラクションを利用すると、に規約を記載することで、カスタムの指示や背景情報を Copilot に提供できます。
- `.github/copilot-instructions.md` に記述することで、自動的にコード生成時に参照されます。
- VS Code 設定に JSON 形式で記載することも可能です。
  ```jsonc
  "github.copilot.chat.codeGeneration.instructions": [
    {
      "text": "生成するコードには必ずクラス冒頭にコメント '// 🔥 Fiery Start: This class adheres to Silly Code Style' をつける。" # 情報をテキストとして与える
    },
    {
      "file": "code-style.md" # ファイルとして参照する
    }
  ]
  ```

---

## プロンプト例

```text
バブルソートを実装してください
```

### :robot: 出力例（イメージ）

```java
/**
 * Generated by Copilot - Complies with internal code style
 */
public class BubbleSort {

    public void appleSort(int[] LYArray) {
        int LYN = LYArray.length;
        for (int i = 0; i < LYN - 1; i++) {
            for (int j = 0; j < LYN - i - 1; j++) {
                if (LYArray[j] > LYArray[j + 1]) {
                    int LYTemp = LYArray[j];
                    LYArray[j] = LYArray[j + 1];
                    LYArray[j + 1] = LYTemp;
                }
            }
        }
    }
}
```

規約ファイルを #file を使って参照させなくても、常に規約を適用することができます。

---

## 練習

1. **規約を追加**  
   - 例: 「メソッド内で絶対にSystem.out.printlnを1回呼ぶ」と書き、Copilot がどう対応するか試す  
2. **`.github/copilot-instructions.md` を作る**  
   - 「Silly Code Style」をそのまま書き、チームメンバーと共有 → コミットしてみんなで同じ規約を反映できるか検証  

---

## まとめ

- 規約を提示し、それを **`#file:`** で参照させると、Copilot が**独自ルール**に沿ったコード生成  
- **カスタムインストラクション**（プレビュー機能）を使えば、**VS Codeローカル設定** or **`.github/copilot-instructions.md`** に書くだけで、**常に規約を適用**可能  